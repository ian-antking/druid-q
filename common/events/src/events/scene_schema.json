{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "lights": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "description": "The unique identifier of the light." },
          "on": {
            "type": "object",
            "properties": {
              "on": { "type": "boolean", "description": "true to turn the light on, false to turn it off." }
            },
            "required": ["on"],
            "additionalProperties": false
          },
          "dimming": {
            "type": "object",
            "properties": { "brightness": { "type": "number", "minimum": 0, "maximum": 100, "description": "Sets the brightness of the light from 0 to 100." } },
            "required": ["brightness"],
            "additionalProperties": false
          },
          "color_temperature": {
            "type": "object",
            "properties": { "mirek": { "type": "integer", "minimum": 153, "maximum": 500, "description": "Color temperature in Mirek scale (153=cool, 500=warm)." } },
            "required": ["mirek"],
            "additionalProperties": false
          },
          "color": {
            "type": "object",
            "properties": {
              "xy": {
                "type": "object",
                "properties": { "x": { "type": "number", "minimum": 0, "maximum": 1 }, "y": { "type": "number", "minimum": 0, "maximum": 1 } },
                "required": ["x", "y"],
                "additionalProperties": false
              }
            },
            "required": ["xy"],
            "additionalProperties": false
          },
          "effects_v2": {
            "type": "object",
            "properties": {
              "action": {
                "type": "object",
                "properties": {
                  "effect": {
                    "type": "string",
                    "enum": ["prism","opal","glisten","sparkle","fire","candle","underwater","cosmos","sunbeam","enchant","no_effect"],
                    "description": "The visual effect to apply to the light."
                  },
                  "parameters": {
                    "type": "object",
                    "properties": {
                      "color": {
                        "type": "object",
                        "properties": {
                          "xy": {
                            "type": "object",
                            "properties": { "x": { "type": "number", "minimum": 0, "maximum": 1 }, "y": { "type": "number", "minimum": 0, "maximum": 1 } },
                            "required": ["x", "y"],
                            "additionalProperties": false
                          }
                        },
                        "required": ["xy"],
                        "additionalProperties": false
                      },
                      "speed": { "type": "number", "minimum": 0, "maximum": 1, "description": "The speed of the effect, from 0 to 1." }
                    },
                    "required": ["color","speed"],
                    "additionalProperties": false
                  }
                },
                "required": ["effect","parameters"],
                "additionalProperties": false
              }
            },
            "required": ["action"],
            "additionalProperties": false
          },
          "alert": {
            "type": "object",
            "properties": { "action": { "type": "string", "enum": ["breathe"], "description": "Triggers a brief visual alert." } },
            "required": ["action"],
            "additionalProperties": false
          },
          "dynamics": {
            "type": "object",
            "properties": { "duration": { "type": "integer", "description": "The transition time for the change in milliseconds." } },
            "required": ["duration"],
            "additionalProperties": false
          }
        },
        "required": ["id","on","dimming","color_temperature","color","effects_v2","alert","dynamics"],
        "additionalProperties": false
      }
    }
  },
  "required": ["lights"],
  "additionalProperties": false
}
